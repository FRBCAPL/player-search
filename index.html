<!DOCTYPE html>
<html lang="en">
<head>
  <title>Player Portal</title>
  <style>
    /* Your existing styles */
    .modal { 
      /* Add modal styles from your original contact popup */
    }
  </style>
</head>
<body>

<!-- PIN Section -->
<div id="pinSection">
  <h2>Enter PIN</h2>
  <input type="password" id="pinInput">
  <button onclick="verifyPin()">Submit</button>
</div>

<!-- Search Interface -->
<div id="searchSection" style="display:none">
  <input type="text" id="searchInput" placeholder="Search players...">
  <div id="results"></div>
</div>

<!-- Contact Modal -->
<div id="contactModal" class="modal">
  <div class="modal-content" id="modalContent"></div>
</div>

<script>
const WEB_APP_URL = "YOUR_APPS_SCRIPT_WEB_APP_URL";

async function verifyPin() {
  const pin = document.getElementById("pinInput").value;
  const response = await fetch(`${WEB_APP_URL}?action=verify&pin=${pin}`);
  const data = await response.json();
  
  if (data.valid) {
    document.getElementById("pinSection").style.display = "none";
    document.getElementById("searchSection").style.display = "block";
    loadPlayers();
  } else {
    alert("Invalid PIN");
  }
}

async function loadPlayers() {
  const response = await fetch(`${WEB_APP_URL}?action=getPlayers`);
  const players = await response.json();
  
  const html = players.map(player => `
    <div class="player">
      ${player} 
      <button onclick="showContact('${player}')">View Contact</button>
    </div>
  `).join("");
  
  document.getElementById("results").innerHTML = html;
}

async function showContact(playerName) {
  const pin = document.getElementById("pinInput").value;
  const response = await fetch(`${WEB_APP_URL}?action=getContact&pin=${pin}&player=${encodeURIComponent(playerName)}`);
  const contact = await response.json();
  
  if (contact.error) {
    alert(contact.error);
  } else {
    document.getElementById("modalContent").innerHTML = `
      <h2>${playerName}</h2>
      <p><strong>Phone:</strong> ${contact.phone}</p>
      <p><strong>Email:</strong> ${contact.email}</p>
      <p><strong>Facebook:</strong> ${contact.facebook}</p>
      <p><strong>Forum:</strong> ${contact.forum}</p>
      <p><strong>Other:</strong> ${contact.other}</p>
    `;
    document.getElementById("contactModal").style.display = "block";
  }
}
</script>
</body>
</html>
